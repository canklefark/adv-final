---
import { Image } from 'astro:assets';
import BaseLayout from '../../layouts/BaseLayout.astro';
import randolphCarter from '../../assets/people/randolph-carter.png';
import FileTabs from '../../components/FileTabs.astro';
import peopleData from '../../data/people.json';

const peopleNames = peopleData.map((person) => person.name);
const pageTitle = peopleNames[2];
const page = 'People';
---

<BaseLayout pageTitle={pageTitle} page={page}>
  <main id="main" class="container">
    <h1 class="fs-l text-base">People of Mythos</h1>
    <div class="columns-2 column--on-m">
      <div class="left-col | flex flex-column">
        <div class="image-wrapper">
          <Image
            src={randolphCarter}
            alt={`${peopleData[2].name}`}
            id={`${peopleData[2].name.toLowerCase()}-image`}
          />
        </div>
      </div>

      <div class="content-wrapper">
        <FileTabs
          activeCreature={pageTitle}
          ariaLabel="people list"
          tabData={peopleData.map((person) => ({
            name: person.name,
            url: person.url,
          }))}
        />

        <article id={`${peopleData[2].name.toLowerCase()}-tab`} role="tabpanel" tabindex="0">
          <div class="text-wrapper flex flex-column">
            <h2 class="fs-2xl text-accent">{peopleData[2].name}</h2>

            <p class="text-dark">{peopleData[2].description}</p>
          </div>
        </article>
      </div>
    </div>
  </main>

  <style>
    .container {
      /* outline: 5px dotted pink; */
      padding-block-end: 2rem;
    }

    .columns-2 {
      --gap: var(--space-xl);
      height: 100%;
      align-items: center;

      & p {
        max-width: 55ch;
      }
    }

    img {
      height: 100%;
      max-height: 600px;
      width: auto;
      border: 1px solid hsl(var(--base) / 0.2);
      border-radius: var(--radius-m);
    }

    article {
      position: relative;
      background-color: var(--clr-base-l-1);
      padding: var(--space-m);
      width: 100%;
      border-radius: 0 0 5px 5px;
      z-index: 10;
    }

    .text-wrapper {
      background-color: var(--clr-light);
      padding: var(--space-m);
      border-radius: 5px;
      box-shadow: 0px 5px 15px -5px var(--shadow-primary);

      h2 {
        position: relative;
        line-height: 1;
      }

      & h2::after {
        content: '';
        position: absolute;
        bottom: calc(-1 * calc(var(--space-m) * 0.5));
        left: 0;
        width: 100%;
        height: 1px;
        background-color: hsl(var(--dark) / 0.25);
      }
    }

    @media (max-width: 48rem) {
      .columns-2 {
        --gap: var(--space-xl);
      }

      .left-col {
        align-items: center;
      }

      h1 {
        place-self: start;
      }

      .content-wrapper {
        width: max-content;
        justify-self: center;
      }

      .text-wrapper {
        align-items: center;
      }
    }
  </style>
</BaseLayout>
